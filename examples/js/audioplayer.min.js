var apUtil=function(){var a={};return a.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},a.shuffleArray=function(a){for(var b=a.length,c=b;c>0;c--)a[b-1]=a.splice(Math.floor(Math.random()*c),1)[0]},a.second2minute=function(a){var b=Math.round(a),c=Math.floor(b/60),d=Math.round(b%60),e=String(c),f=String(d);return 10>c&&(e="0"+e),10>d&&(f="0"+f),e+":"+f},a.getPer=function(a,b){var c=a/b*100;return c},a.getRePer=function(a,b){var c=a/100*b;return c},a}(jQuery);!function(a,b,c){a.audioplayer=function(a){function d(a){var b=l.source.length;0>q||q>b-1?(q=0>q?0:b-1,"ended"==a&&(clearInterval(p),p=0,E.removeClass("pause"))):(v.paused&&"play"==a&&""!=v.src||(v.src=l.source[q]+u),console.log("caller -",a,v.src),v.play(),0==p&&(p=setInterval(f,500)),E.addClass("pause"))}function e(){v.pause(),clearInterval(p),p=0,E.removeClass("pause")}function f(){b.isNumeric(v.duration)&&(x.text(c.second2minute(v.currentTime)),B.css("width",c.getPer(v.currentTime,v.duration)+"%"),w.text("load-"+Math.round(c.getPer(v.buffered.end(0),v.duration))+"%"),A.css("width",c.getPer(v.buffered.end(0),v.duration)+"%"))}function g(a){c.second2minute(a.target.duration);b(l.selector+" .time-total").text("/"+c.second2minute(a.target.duration))}function h(){q++,d("ended")}function i(){y.text("vol "+100*v.volume+"%"),D.width(100*v.volume+"%"),0==v.volume?H.addClass("off"):H.removeClass("off")}function j(a){if(t){var b=Math.floor((a.pageX-n.offset().left)/n.width()*100);b=0>b?0:b,b=b>100?100:b,m.css("width",b+"%")}}function k(){var a=l.source[0]+".mp3";if(b("#fallbackplayer").length>0)b("#fallbackplayer")[0].url=a;else{s.empty();var c=b("#myaudio").css("width"),d='<object classid="clsid:6bf52a52-394a-11d3-b153-00c04f79faa6" id="fallbackplayer" width="'+c+'" height="45">					<param name="AutoStart" value="true" />					<param id="playerurl" name="url" value="'+a+'" />					<embed id="playerE" src="'+a+'" width="370" height="45" type="application/x-ms-wmp" autostart="true" />				</object>';s.html(d)}}if(a.selector&&!(a.source.length<1)){var l=c.extend({selector:"",source:[],random:!1},a);l.random&&c.shuffleArray(l.source);var m,n,o=this,p=0,q=0,r=.5,s=b(l.selector),t=!1,u="",v=s.find("audio")[0],w=b(l.selector+" .time-loaded"),x=b(l.selector+" .time-current"),y=b(l.selector+" .volume-current"),z=b(l.selector+" .barbg.time"),A=b(l.selector+" .time .loaded"),B=b(l.selector+" .time .current"),C=b(l.selector+" .barbg.volume"),D=b(l.selector+" .barbg.volume .current"),E=b(l.selector+" .buttons .play"),F=b(l.selector+" .buttons .next"),G=b(l.selector+" .buttons .prev"),H=b(l.selector+" .buttons .volume");v.canPlayType?(v.canPlayType("audio/mpeg").replace(/no/,"")?u=".mp3":v.canPlayType("audio/ogg").replace(/no/,"")&&(u=".ogg"),v.addEventListener("loadedmetadata",g),v.addEventListener("ended",h),v.addEventListener("volumechange",i),E.on("click",function(){return E.hasClass("pause")?e():d("play"),!1}),F.on("click",function(){return o.next(),!1}),G.on("click",function(){return o.prev(),!1}),H.on("click",function(){return r=0==v.volume&&0==r?.5:r,v.volume=0==v.volume?r:0,!1}),z.on("mousedown",function(){return t=!0,0!=p&&(clearInterval(p),p=0),m=B,n=z,b(document).on("mousemove",j),!1}),v.volume=r,C.on("mousedown",function(){return t=!0,0!=p&&(clearInterval(p),p=0),m=D,n=C,b(document).on("mousemove",j),!1}),b(document).on("mouseup",function(a){if(b(document).off("mousemove",j),t){var d=Math.floor((a.pageX-n.offset().left)/n.width()*100);d=0>d?0:d,d=d>100?100:d,m==B?v.currentTime=c.getRePer(d,v.duration):(v.volume=d/100,r=v.volume),0==p&&(p=setInterval(f,500))}return t=!1,!1})):(u="no",k()),o.play=function(a){return a&&(l.source=a,q=0,v.src=l.source[q]+u,"no"==u)?(k(),void 0):(d("play"),void 0)},o.pause=function(){e()},o.prev=function(){q--,d("prev")},o.next=function(){q++,d("next")},o.musicList=function(a){l.source=a,q=0,v.src=l.source[q]+u}}}}(this,jQuery,apUtil);